// ============================================================
// i18n.js — English / Hebrew translation system
// ============================================================
const I18N = {
  en: {
    // ---------- Global ----------
    appName: "Factory Control",
    langToggle: "עב",
    logout: "Logout",
    save: "Save",
    cancel: "Cancel",
    delete: "Delete",
    edit: "Edit",
    back: "Back",
    submit: "Submit",
    confirm: "Confirm",
    yes: "Yes",
    no: "No",
    done: "Done",
    notDone: "Not Done",
    notes: "Notes",
    date: "Date",
    today: "Today",
    search: "Search…",
    noData: "No records yet",
    addNew: "Add New",
    history: "History",
    required: "Required",
    optional: "Optional",
    saved: "Saved successfully!",
    exportCSV: "Export CSV",
    dashboard: "Dashboard",
    settings: "Settings",
    recentEntries: "Recent Entries",
    viewAll: "View All",
    totalRecords: "Total Records",
    normal: "Normal",
    abnormal: "Abnormal",
    approved: "Approved",
    notApproved: "Not Approved",
    selectOne: "-- Select --",
    addNote: "Add a note…",
    loginTitle: "Factory Control",
    loginSubtitle: "Alcohol Production Documentation",
    username: "Username",
    password: "Password",
    login: "Log In",
    loginError: "Invalid username or password",
    signUp: "Sign Up",
    signUpTitle: "Create Account",
    signUpSubtitle: "Join the factory team",
    fullName: "Full Name",
    confirmPassword: "Confirm Password",
    selectRole: "Select Role",
    alreadyHaveAccount: "Already have an account?",
    dontHaveAccount: "Don't have an account?",
    signUpError_userExists: "Username already taken",
    signUpError_passwordMismatch: "Passwords don't match",
    signUpError_passwordShort: "Password must be at least 4 characters",
    signUpError_fillAll: "Please fill in all fields",
    signUpSuccess: "Account created! You can now log in.",
    role_manager: "Manager",
    role_worker: "Worker",
    role_admin: "Administrator",
    welcome: "Welcome",
    quickActions: "Quick Actions",
    productionOverview: "Production Overview",
    todayActivity: "Today's Activity",

    // ---------- Backoffice ----------
    backoffice: "Backoffice",
    userManagement: "User Management",
    manageUsers: "Manage Users",
    addUser: "Add User",
    editUser: "Edit User",
    deleteUser: "Delete User",
    userList: "User List",
    permissions: "Permissions",
    active: "Active",
    inactive: "Inactive",
    lastLogin: "Last Login",
    createdAt: "Created At",
    actions: "Actions",
    email: "Email",
    phone: "Phone",
    status: "Status",

    // ---------- Nav ----------
    nav_dashboard: "Dashboard",
    nav_receiving: "Receiving",
    nav_production: "Production",
    nav_bottling: "Bottling",
    nav_inventory: "Inventory",
    nav_backoffice: "Backoffice",

    // ---------- Module Titles ----------
    mod_rawMaterials: "Raw Material Receiving",
    mod_dateReceiving: "Date Receiving",
    mod_fermentation: "Fermentation",
    mod_distillation1: "Distillation 1",
    mod_distillation2: "Distillation 2",
    mod_bottling: "Bottling QA",
    mod_inventory: "Inventory",
    mod_bottleInventory: "Bottle Inventory",
    mod_rawInventory: "Raw Material Inventory",

    // Settings
    settings: "Settings",
    dataExport: "Data Backup",
    exportAllData: "Export Full Database (CSV)",
    confirmExport: "Download full database backup?",

    // ---------- Raw Materials ----------
    rm_supplier: "Supplier",
    rm_receiveDate: "Receiving Date",
    rm_category: "Category",
    rm_item: "Specific Item",
    rm_weight: "Weight / Quantity",
    rm_unit: "Unit",
    rm_expiry: "Expiry Date",
    rm_tithing: "Tithing Done",
    rm_healthCert: "Health Ministry Cert.",
    rm_kosher: "Kosher Certificate",
    rm_cat_spices: "Spices",
    rm_cat_labels: "Labels",
    rm_cat_packaging: "Packaging",

    // ---------- Date Receiving ----------
    dr_supplier: "Supplier",
    dr_receiveDate: "Receiving Date",
    dr_weight: "Weight (kg)",
    dr_tithing: "Tithing",
    dr_expiryPeriod: "Expiry Period",
    dr_expiryPeriod_1year: "1 Year",
    dr_expiryPeriod_custom: "Custom",
    dr_qtyInDate: "Quantity in Date",

    // ---------- Fermentation ----------
    fm_date: "Date",
    fm_tankSize: "Tank Size (L)",
    fm_datesKg: "Dates Added (kg)",
    fm_quantity: "Quantity (L)",
    fm_temperature: "Temperature (°C)",
    fm_sugar: "Sugar Content",
    fm_ph: "pH",
    fm_sentToDistillation: "Sent to Distillation",

    // ---------- Distillation 1 ----------
    d1_date: "Date",
    d1_type: "Type",
    d1_stillName: "Still Name",
    d1_fermDate: "Fermentation Date",
    d1_distQty: "Distillation Qty (L)",
    d1_initAlcohol: "Initial Alcohol %",
    d1_initTemp: "Initial Temp (°C)",
    d1_finalAlcohol: "Final Alcohol %",
    d1_temp: "Temperature (°C)",
    d1_timeRange: "Time Range",
    d1_distilledQty: "Distilled Qty (L)",
    d1_type_dist1: "Distillation 1",
    d1_type_tailsArak: "Tails - Arak",
    d1_type_tailsGin: "Tails - Gin",
    d1_type_tailsEDV: "Tails - EDV",
    d1_type_cleaning: "Cleaning Distillation",
    d1_still_amiti: "Amiti",
    d1_still_aladdin: "Aladdin",

    // ---------- Distillation 2 ----------
    d2_date: "Date",
    d2_productType: "Product Type",
    d2_d1Dates: "Distillation 1 Dates",
    d2_batchNumber: "Batch Number",
    d2_initAlcohol: "Initial Alcohol %",
    d2_headSep: "Head Separation (5L)",
    d2_tailAlcohol: "Tail Separation %",
    d2_temp: "Temperature (°C)",
    d2_timeRange: "Time Range",
    d2_quantity: "Quantity (L)",

    // ---------- Bottling ----------
    bt_drinkType: "Drink Type",
    bt_bottlingDate: "Bottling Date",
    bt_batchNumber: "Batch Number",
    bt_barrelNumber: "Barrel Number",
    bt_d2Date: "Distillation 2 Date",
    bt_alcohol: "Alcohol %",
    bt_filtered: "Filtered",
    bt_color: "Color",
    bt_taste: "Taste & Smell",
    bt_contaminants: "Contaminant-Free",
    bt_bottleCount: "Bottle Count",
    bt_decision: "Decision",
    bt_qaSignature: "QA Signature",

    // ---------- Drink Types ----------
    drink_arak: "Arak",
    drink_gin: "Gin",
    drink_edv: "EDV",
    drink_licorice: "Licorice",
    drink_brandyVS: "Brandy VS",
    drink_brandyVSOP: "Brandy VSOP",
    drink_brandyMed: "Mediterranean Brandy",

    // ---------- Inventory ----------
    inv_drinkType: "Drink Type",
    inv_warehouseQty: "Warehouse Qty",
    inv_item: "Item",
    inv_component: "Component",
    inv_unit: "Unit",
    inv_stock: "Stock",
    inv_bottles: "Bottles & Corks",
    inv_labels: "Labels",
    inv_spices: "Spices",
    inv_dates: "Dates",
    inv_cartons: "Cartons",

    // ---------- Permissions ----------
    perm_denied: "You don't have permission to access this feature",
    perm_managerOnly: "Manager access only",
    perm_deleteConfirm: "Are you sure you want to delete this record?",

    // ---------- Suppliers ----------
    sup_tamartushka: "Tamartushka",
    sup_nichuchot: "Nichuchot Argaman",
    sup_iherb: "I-HERB",
    sup_shlr: "SH.L.R",
    sup_pcsi: "PCSI",
    sup_yakev: "Yakev HaEla",
    sup_selfHarvest: "Self-harvest",
    sup_gamliel: "Gamliel",
    sup_lara: "Lara",
    sup_other: "Other",
  },

  he: {
    // ---------- Global ----------
    appName: "בקרת מפעל",
    langToggle: "EN",
    logout: "התנתק",
    save: "שמור",
    cancel: "בטל",
    delete: "מחק",
    edit: "ערוך",
    back: "חזור",
    submit: "שלח",
    confirm: "אשר",
    yes: "כן",
    no: "לא",
    done: "בוצע",
    notDone: "לא בוצע",
    notes: "הערות",
    date: "תאריך",
    today: "היום",
    search: "חיפוש…",
    noData: "אין רשומות עדיין",
    addNew: "הוסף חדש",
    history: "היסטוריה",
    required: "חובה",
    optional: "אופציונלי",
    saved: "נשמר בהצלחה!",
    exportCSV: "ייצא CSV",
    dashboard: "לוח בקרה",
    settings: "הגדרות",
    recentEntries: "רשומות אחרונות",
    viewAll: "הצג הכל",
    totalRecords: "סה\"כ רשומות",
    normal: "תקין",
    abnormal: "לא תקין",
    approved: "מאושר",
    notApproved: "לא מאושר",
    selectOne: "-- בחר --",
    addNote: "הוסף הערה…",
    loginTitle: "בקרת מפעל",
    loginSubtitle: "תיעוד ייצור אלכוהול",
    username: "שם משתמש",
    password: "סיסמה",
    login: "התחבר",
    loginError: "שם משתמש או סיסמה שגויים",
    signUp: "הרשמה",
    signUpTitle: "צור חשבון",
    signUpSubtitle: "הצטרף לצוות המפעל",
    fullName: "שם מלא",
    confirmPassword: "אשר סיסמה",
    selectRole: "בחר תפקיד",
    alreadyHaveAccount: "כבר יש לך חשבון?",
    dontHaveAccount: "אין לך חשבון?",
    signUpError_userExists: "שם המשתמש כבר תפוס",
    signUpError_passwordMismatch: "הסיסמאות אינן תואמות",
    signUpError_passwordShort: "הסיסמה חייבת להכיל לפחות 4 תווים",
    signUpError_fillAll: "נא למלא את כל השדות",
    signUpSuccess: "החשבון נוצר! כעת ניתן להתחבר.",
    role_manager: "מנהל",
    role_worker: "עובד",
    role_admin: "מנהל מערכת",
    welcome: "ברוך הבא",
    quickActions: "פעולות מהירות",
    productionOverview: "סקירת ייצור",
    todayActivity: "פעילות היום",

    // ---------- Backoffice ----------
    settings: "הגדרות",
    dataExport: "גיבוי נתונים",
    exportAllData: "ייצא מסד נתונים מלא (CSV)",
    confirmExport: "להוריד גיבוי מלא?",

    backoffice: "ניהול מערכת",
    userManagement: "ניהול משתמשים",
    manageUsers: "נהל משתמשים",
    addUser: "הוסף משתמש",
    editUser: "ערוך משתמש",
    deleteUser: "מחק משתמש",
    userList: "רשימת משתמשים",
    permissions: "הרשאות",
    active: "פעיל",
    inactive: "לא פעיל",
    lastLogin: "התחברות אחרונה",
    createdAt: "נוצר בתאריך",
    actions: "פעולות",
    email: "דוא\"ל",
    phone: "טלפון",
    status: "סטטוס",

    // ---------- Nav ----------
    nav_dashboard: "לוח בקרה",
    nav_receiving: "קבלה",
    nav_production: "ייצור",
    nav_bottling: "ביקבוק",
    nav_inventory: "מלאי",
    nav_backoffice: "ניהול",

    // ---------- Module Titles ----------
    mod_rawMaterials: "קבלת חומרי גלם",
    mod_dateReceiving: "קבלת תמרים",
    mod_fermentation: "תסיסה",
    mod_distillation1: "זיקוק 1",
    mod_distillation2: "זיקוק 2",
    mod_bottling: "בקרת איכות ביקבוק",
    mod_inventory: "מלאי",
    mod_bottleInventory: "מלאי בקבוקים",
    mod_rawInventory: "מלאי חומרי גלם",

    // ---------- Raw Materials ----------
    rm_supplier: "ספק",
    rm_receiveDate: "תאריך קבלה",
    rm_category: "קטגוריה",
    rm_item: "פריט ספציפי",
    rm_weight: "משקל / כמות",
    rm_unit: "יחידה",
    rm_expiry: "תאריך תפוגה",
    rm_tithing: "מעושר",
    rm_healthCert: "אישור משרד הבריאות",
    rm_kosher: "תעודת כשרות",
    rm_cat_spices: "תבלינים",
    rm_cat_labels: "תוויות",
    rm_cat_packaging: "אריזה",

    // ---------- Date Receiving ----------
    dr_supplier: "ספק",
    dr_receiveDate: "תאריך קבלה",
    dr_weight: "משקל (ק\"ג)",
    dr_tithing: "מעשר",
    dr_expiryPeriod: "תקופת תפוגה",
    dr_expiryPeriod_1year: "שנה",
    dr_expiryPeriod_custom: "מותאם אישית",
    dr_qtyInDate: "כמות בתמר",

    // ---------- Fermentation ----------
    fm_date: "תאריך",
    fm_tankSize: "גודל מיכל (ליטר)",
    fm_datesKg: "תמרים שנוספו (ק\"ג)",
    fm_quantity: "כמות (ליטר)",
    fm_temperature: "טמפרטורה (°C)",
    fm_sugar: "תכולת סוכר",
    fm_ph: "pH",
    fm_sentToDistillation: "נשלח לזיקוק",

    // ---------- Distillation 1 ----------
    d1_date: "תאריך",
    d1_type: "סוג",
    d1_stillName: "שם מזקק",
    d1_fermDate: "תאריך תסיסה",
    d1_distQty: "כמות זיקוק (ליטר)",
    d1_initAlcohol: "אלכוהול התחלתי %",
    d1_initTemp: "טמפרטורה התחלתית (°C)",
    d1_finalAlcohol: "אלכוהול סופי %",
    d1_temp: "טמפרטורה (°C)",
    d1_timeRange: "טווח זמן",
    d1_distilledQty: "כמות מזוקקת (ליטר)",
    d1_type_dist1: "זיקוק 1",
    d1_type_tailsArak: "זנבות - ערק",
    d1_type_tailsGin: "זנבות - ג'ין",
    d1_type_tailsEDV: "זנבות - EDV",
    d1_type_cleaning: "זיקוק ניקוי",
    d1_still_amiti: "עמיתי",
    d1_still_aladdin: "אלאדין",

    // ---------- Distillation 2 ----------
    d2_date: "תאריך",
    d2_productType: "סוג מוצר",
    d2_d1Dates: "תאריכי זיקוק 1",
    d2_batchNumber: "מספר אצווה",
    d2_initAlcohol: "אלכוהול התחלתי %",
    d2_headSep: "הפרדת ראש (5 ליטר)",
    d2_tailAlcohol: "הפרדת זנב %",
    d2_temp: "טמפרטורה (°C)",
    d2_timeRange: "טווח זמן",
    d2_quantity: "כמות (ליטר)",

    // ---------- Bottling ----------
    bt_drinkType: "סוג משקה",
    bt_bottlingDate: "תאריך ביקבוק",
    bt_batchNumber: "מספר אצווה",
    bt_barrelNumber: "מספר חבית",
    bt_d2Date: "תאריך זיקוק 2",
    bt_alcohol: "אלכוהול %",
    bt_filtered: "מסונן",
    bt_color: "צבע",
    bt_taste: "טעם וריח",
    bt_contaminants: "נקי ממזהמים",
    bt_bottleCount: "מספר בקבוקים",
    bt_decision: "החלטה",
    bt_qaSignature: "חתימת בקרת איכות",

    // ---------- Drink Types ----------
    drink_arak: "ערק",
    drink_gin: "ג'ין",
    drink_edv: "EDV",
    drink_licorice: "שומר",
    drink_brandyVS: "ברנדי VS",
    drink_brandyVSOP: "ברנדי VSOP",
    drink_brandyMed: "ברנדי ים תיכוני",

    // ---------- Inventory ----------
    inv_drinkType: "סוג משקה",
    inv_warehouseQty: "כמות במחסן",
    inv_item: "פריט",
    inv_component: "רכיב",
    inv_unit: "יחידה",
    inv_stock: "מלאי",
    inv_bottles: "בקבוקים ופקקים",
    inv_labels: "תוויות",
    inv_spices: "תבלינים",
    inv_dates: "תמרים",
    inv_cartons: "קרטונים",

    // ---------- Permissions ----------
    perm_denied: "אין לך הרשאה לגשת לתכונה זו",
    perm_managerOnly: "גישה למנהלים בלבד",
    perm_deleteConfirm: "האם אתה בטוח שברצונך למחוק רשומה זו?",

    // ---------- Suppliers ----------
    sup_tamartushka: "תמרטושקה",
    sup_nichuchot: "ניצוצות ארגמן",
    sup_iherb: "I-HERB",
    sup_shlr: "SH.L.R",
    sup_pcsi: "PCSI",
    sup_yakev: "יקב האלה",
    sup_selfHarvest: "קטיף עצמי",
    sup_gamliel: "גמליאל",
    sup_lara: "לארה",
    sup_other: "אחר",
  }
};

let currentLang = localStorage.getItem('factory_lang') || 'en';

function t(key) {
  return (I18N[currentLang] && I18N[currentLang][key]) || (I18N.en[key]) || key;
}

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('factory_lang', lang);
  document.documentElement.lang = lang === 'he' ? 'he' : 'en';
  document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
  // Re-render current view
  if (typeof renderApp === 'function') renderApp();
}

function toggleLang() {
  setLang(currentLang === 'en' ? 'he' : 'en');
}
